-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;

CREATE TABLE IF NOT EXISTS PUBLIC.POST_TAGS (
	POST_ID INTEGER NOT NULL,
	TAG_ID INTEGER NOT NULL,
	CONSTRAINT POST_TAGS_PKEY PRIMARY KEY (POST_ID, TAG_ID)
);

CREATE TABLE IF NOT EXISTS PUBLIC.POSTS (
	ID SERIAL NOT NULL,
	USER_ID INTEGER NOT NULL,
	TITLE CHARACTER VARYING(255) COLLATE PG_CATALOG."default" NOT NULL,
	CONTENT TEXT COLLATE PG_CATALOG."default" NOT NULL,
	CREATED_AT TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT NOW(),
	BODY TEXT COLLATE PG_CATALOG."default" NOT NULL,
	CONSTRAINT POSTS_PKEY PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS PUBLIC.TAGS (
	ID SERIAL NOT NULL,
	NAME CHARACTER VARYING(50) COLLATE PG_CATALOG."default" NOT NULL,
	CONSTRAINT TAGS_PKEY PRIMARY KEY (ID),
	CONSTRAINT TAGS_NAME_KEY UNIQUE (NAME)
);

CREATE TABLE IF NOT EXISTS PUBLIC.USERS (
	ID SERIAL NOT NULL,
	USERNAME CHARACTER VARYING(50) COLLATE PG_CATALOG."default" NOT NULL,
	EMAIL CHARACTER VARYING(100) COLLATE PG_CATALOG."default" NOT NULL,
	CREATED_AT TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(),
	CONSTRAINT USERS_PKEY PRIMARY KEY (ID),
	CONSTRAINT USERS_EMAIL_KEY UNIQUE (EMAIL),
	CONSTRAINT USERS_USERNAME_KEY UNIQUE (USERNAME)
);

ALTER TABLE IF EXISTS PUBLIC.POST_TAGS
ADD CONSTRAINT POST_TAGS_POST_ID_FKEY FOREIGN KEY (POST_ID) REFERENCES PUBLIC.POSTS (ID) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE IF EXISTS PUBLIC.POST_TAGS
ADD CONSTRAINT POST_TAGS_TAG_ID_FKEY FOREIGN KEY (TAG_ID) REFERENCES PUBLIC.TAGS (ID) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE IF EXISTS PUBLIC.POSTS
ADD CONSTRAINT FK_POSTS_USERS FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS (ID) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE IF EXISTS PUBLIC.POSTS
ADD CONSTRAINT POSTS_USER_ID_FKEY FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS (ID) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE CASCADE;

END;